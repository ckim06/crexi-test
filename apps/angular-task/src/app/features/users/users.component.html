<ng-template #loading>
    <mat-spinner />
</ng-template>
<form [formGroup]="filterForm">
    <mat-form-field>
        <mat-label>search by name</mat-label>
        <input formControlName="searchText" matInput placeholder="Search" />
    </mat-form-field>
</form>
<div *ngrxLet="users$ as users; suspenseTpl: loading">
    @for (user of users; track user.id) {
        <mat-card appearance="outlined">
            <mat-card-header>
                <mat-card-title (click)="toggleFav(user)">
                    @if (user.isFavorite) {
                        <mat-icon aria-hidden="false" aria-label="Favorite" fontIcon=" star" />
                    } @else {
                        <mat-icon aria-hidden="false" aria-label="Favorite" fontIcon=" star_border" />
                    }
                    <img src="https://randomuser.me/api/portraits/women/{{ user.id }}.jpg" />
                    {{ user.name }}
                </mat-card-title>
                <mat-card-subtitle> id: {{ user.id }} </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                Address: {{ user.address.street }} {{ user.address.suite }}<br />
                {{ user.address.city }}, {{ user.address.zipcode }} Phone: {{ user.phone }}
            </mat-card-content>
            <mat-card-actions>
                <button (click)="onRowClick(user)" mat-button>More Info</button>
            </mat-card-actions>
        </mat-card>
    }
</div>
